!function(e){var t={};function n(r){if(t[r])return t[r].exports;var c=t[r]={i:r,l:!1,exports:{}};return e[r].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(r,c,function(t){return e[t]}.bind(null,c));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";n.r(t);n(2);var r="f6c065f36d3bf94559470b07bcf0d80c",c=document.querySelector(".input"),o=document.querySelector(".popup__search"),i=document.querySelector(".popup"),a=document.querySelector(".popup__button"),u=document.querySelector(".popup__close");function d(){var e=document.querySelector(".linkMyLocation");e.href="",navigator.geolocation?(console.log("Определение местоположения…"),navigator.geolocation.getCurrentPosition((function(t){var n=t.coords.latitude,c=t.coords.longitude;e.href="https://api.openweathermap.org/data/2.5/onecall?lat=".concat(n,"&lon=").concat(c,"&appid=").concat(r,"&units=metric"),fetch(e).then((function(e){return e.json()})).then((function(e){s(e)}))}),(function(){console.log("Невозможно получить ваше местоположение")}))):console.log("Geolocation не поддерживается вашим браузером")}function s(e){console.log(e);var t=f(e.daily),n=h(e.hourly),r=document.querySelector(".weather__list"),c=document.querySelector(".weather__frames");document.querySelector(".weather__city").innerHTML=e.timezone.split("/").slice(1),document.querySelectorAll(".degrees").forEach((function(t){return t.innerHTML="".concat(Math.round(e.current.temp),"&deg")})),document.querySelectorAll(".description").forEach((function(t){return t.innerHTML=e.current.weather.map((function(e){return e.description.charAt(0).toUpperCase()+e.description.slice(1)}))})),document.querySelector(".weather__time-now").innerHTML="".concat(function(){var e=(new Date).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),t=Number(e.slice(0,2));if(12===t&&t>=1&&t<=12)return"".concat(t+e.slice(2)," AM");return"".concat(t+e.slice(2)," PM")}(e.current.dt)),document.querySelector(".sunrise").innerHTML=new Date(e.current.sunrise).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),document.querySelectorAll(".coords").forEach((function(t){return t.innerHTML="H:".concat(Math.round(e.lat),"&deg L:").concat(Math.round(e.lon),"&deg")})),document.querySelector(".feels-like").innerHTML="".concat(Math.round(e.current.feels_like),"&deg"),document.querySelector(".humidity").innerHTML="".concat(Math.round(e.current.humidity),"%"),document.querySelector(".visibility").innerHTML="".concat(e.current.visibility/1e3," км"),t.forEach((function(e,t,n){var c=function(e){var t=document.createElement("li");return t.classList.add("weather__item"),t.innerHTML='\n    <div class="weather__weeks">\n      <div class="weather__dt">'.concat(e.day,'</div>\n      <img class="weather__icon icon" src="https://openweathermap.org/themes/openweathermap/assets/vendor/owm/img/widgets/').concat(e.icon,'.png" alt="icon">\n    </div>\n    <div class="weather__graphDegress">\n      <div class="weather__degrees-min">').concat(e.minT,'&deg</div>\n      <div class="weather__lineGraph">\n        <span class="weather__range" style="left: ').concat(30+e.minT,"px; width: ").concat(30+e.maxT,'px"></span>\n      </div>\n      <div class="weather__degrees_max">').concat(e.maxT,"&deg</div>\n    </div>\n    "),t}(e);r.append(c)})),n.forEach((function(e){n[0].hour="Now";var t,r,o=(t=e,(r=document.createElement("li")).classList.add("weather__frame"),r.innerHTML='\n    <div class="weather__frame_time">'.concat(t.hour,'</div>\n    <img class="weather__icon icon" src="https://openweathermap.org/themes/openweathermap/assets/vendor/owm/img/widgets/').concat(t.icon,'.png" alt="icon">\n    <div class="weather__frame_degrees average-daily-temperature">').concat(t.degrees,"&deg</div>\n  "),r);c.append(o)}))}d();var l,p,m,f=function(e){return e.map((function(e){return{day:function(e){var t=new Date;return t.setTime(e+"000"),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()]}(e.dt),minT:Math.round(e.temp.min),maxT:Math.round(e.temp.max),icon:e.weather.map((function(e){return e.icon}))}}))},h=function(e){return e.slice(0,10).map((function(e){var t,n;return{hour:(t=e.dt,(n=new Date).setTime(t+"000"),["12am","1am","2am","3am","4am","5am","6am","7am","8am","9am","10am","11am","12am","1pm","2pm","3pm","4pm","5pm","6pm","7pm","8pm","9pm","10pm","11pm"][n.getHours()]),icon:e.weather.map((function(e){return e.icon})),degrees:Math.round(e.temp)}}))};function _(){document.querySelectorAll(".weather__frames").forEach((function(e){return e.innerHTML=""})),document.querySelectorAll(".weather__list").forEach((function(e){return e.innerHTML=""}))}o.onkeyup=(l=function(e){var t=e.target;return fetch("https://api.openweathermap.org/geo/1.0/direct?q=".concat(t.value,"&limit=5&appid=").concat(r)).then((function(e){return e.json()})).then((function(e){var t,n;console.log(e),t=e,(n=document.querySelector(".popup__results")).replaceChildren(),t.map((function(e){var t=document.createElement("li");t.classList.add("popup__item"),t.style.listStyle="none",t.innerHTML='\n    <div class="popup__name">'.concat(e.name,'</div>\n    <div class="popup__country">').concat(e.state,"</div>\n  "),n.append(t)})),function(e,t){e.forEach((function(e,n){e.addEventListener("click",(function(){var c=document.createElement("span");c.classList.add("popup__checked"),e.append(c),a.addEventListener("click",(function(){t.map((function(e,t){n===t&&fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(e.lat,"&lon=").concat(e.lon,"&appid=").concat(r,"&units=metric")).then((function(e){return e.json()})).then((function(e){return function(e){var t=document.querySelector(".sidebar__list-city"),n=document.createElement("li");n.classList.add("sidebar__item-city"),n.style.listStyle="none",n.innerHTML='\n      <div class="sidebar__left">\n        <div class="sidebar__subheader">'.concat(e.timezone.split("/").slice(1),'</div>\n        <div class="sidebar__time">').concat(function(e){var t=new Date;t.setTime(1e3*e);var n=t.getHours(),r=t.getMinutes(),c=Number(["12","1","2","3","4","5","6","7","8","9","10","11","12","1","2","3","4","5","6","7","8","9","10","11"][n]),o=String(r).length<2?"0"+r:r;return 12===c&&c>1&&c<=12?"".concat(c,":").concat(o," AM"):"".concat(c,":").concat(o," PM")}(e.current.dt),'</div>\n        <div class="sidebar__description">').concat(e.current.weather.map((function(e){return e.description})),'</div>\n      </div>\n      <div class="sidebar__right">\n        <div class="sidebar__degrees">').concat(Math.round(e.current.temp),'&deg</div>\n        <div class="sidebar__coordinate">H:').concat(Math.round(e.lat),"&deg L:").concat(Math.round(e.lon),"&deg</div>\n      </div>\n    "),t.append(n)}(e),e})).then((function(e){return function(e){document.querySelectorAll(".sidebar__list-city").forEach((function(t){t.addEventListener("click",(function(){fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(e.lat,"&lon=").concat(e.lon,"&appid=").concat(r,"&units=metric")).then((function(e){return e.json()})).then((function(e){_(),s(e)}))}))}))}(e)}))}))}))}))}))}(document.querySelectorAll(".popup__item"),t)}))},p=500,m=!1,function(){m||(l.apply(this,arguments),m=!0,setTimeout((function(){return m=!1}),p))}),c.addEventListener("click",(function(){i.classList.toggle("active")})),a.addEventListener("click",(function(){i.classList.remove("active")})),u.addEventListener("click",(function(){i.classList.remove("active")})),document.querySelector(".linkMyLocation").addEventListener("click",(function(e){e.preventDefault(),_(),d()}))},function(e,t,n){}]);
//# sourceMappingURL=bundle.js.map